{"version":3,"sources":["../../src/pages/assign-company/assign-company.ts","../../src/pages/assign-company/assign-company.module.ts"],"names":[],"mappings":"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","file":"100.js","sourcesContent":["import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ViewController, ToastController, LoadingController } from 'ionic-angular';\r\nimport { CompanyProvider } from '../../providers/company/company';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-assign-company',\r\n  templateUrl: 'assign-company.html',\r\n  providers: [CompanyProvider]\r\n})\r\nexport class AssignCompanyPage {\r\nemailId:any;\r\ncompanies:any;\r\nselected_comps:any=[];\r\nselected_alerts:any=[];\r\nuserId:any = localStorage.getItem('userinfo');\r\n  constructor(public navCtrl: NavController, public navParams: NavParams, public viewCtrl: ViewController, public toastCtrl: ToastController,public companyProvider: CompanyProvider,public loadingCtrl: LoadingController) {\r\n  \tthis.emailId = navParams.get('id');\r\n  \tthis.selected_alerts = navParams.get('alertIds');\r\n  \tthis.selected_comps = navParams.get('companyIds');\r\n  \tthis.getUserComps();\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n  }\r\n\r\n  dismiss() {\r\n    this.viewCtrl.dismiss();\r\n  }\r\n\r\n  getUserComps(){\r\n  \tconst loading = this.loadingCtrl.create({});\r\n\tloading.present();\r\n  \tthis.companyProvider.userCompaniesList(this.userId).subscribe((companies)=>{\r\n        this.companies=companies;\r\n        loading.dismissAll();\r\n    },\r\n    err => {\r\n        loading.dismissAll();\r\n        this.showTechnicalError('1');\r\n    });\r\n  }\r\n\r\n  insertContactToArray(event,companyId,type){\r\n  \tif(type == 0){\r\n  \t\tif(event.checked == true){\r\n\t\t\tthis.selected_comps.push(companyId);\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.removeArray(this.selected_comps, companyId);\r\n\t\t\tthis.removeArray(this.selected_alerts, companyId);\r\n\t\t}\r\n  \t}\r\n  \telse{\r\n  \t\tif(event.checked == true){\r\n\t\t\tthis.selected_alerts.push(companyId);\r\n\t\t}\r\n\t\telse{\r\n\t\t\tthis.removeArray(this.selected_alerts, companyId);\r\n\t\t}\r\n  \t}\r\n  }\r\n\r\n\tremoveArray(arr,what) {\r\n\t\tvar a = arguments, L = a.length, ax;\r\n\t\twhile (L > 1 && arr.length) {\r\n\t\t    what = a[--L];\r\n\t\t    while ((ax= arr.indexOf(what)) !== -1) {\r\n\t\t        arr.splice(ax, 1);\r\n\t\t    }\r\n\t\t}\r\n\t\treturn arr;\r\n\t}\r\n\r\n\tsave(){\r\n\t\tif(this.selected_comps.length > 0){\r\n\t\t\tconst loading = this.loadingCtrl.create({});\r\n\t        loading.present();\r\n\t        this.companyProvider.updateJobNotisEmail({'_id' : this.emailId, alertIds: this.selected_alerts, companyIds: this.selected_comps}).subscribe((updated)=>{\r\n\t          if(updated.status == 1)\r\n\t          {\r\n\t              loading.dismissAll()\r\n\t              let toast = this.toastCtrl.create({\r\n\t                  message: 'Email preference updated.',\r\n\t                  duration: 3000,\r\n\t                  position: 'top',\r\n\t                  cssClass: 'success'\r\n\t                 });\r\n\t                 toast.present(); \r\n\t                this.dismiss();\r\n\t          }\r\n\t          else\r\n\t          {\r\n\t              loading.dismissAll()\r\n\t                let toast = this.toastCtrl.create({\r\n\t                    message: 'Error, plz try later.',\r\n\t                    duration: 3000,\r\n\t                    position: 'top',\r\n\t                    cssClass: 'danger'\r\n\t                   });\r\n\t                   toast.present(); \r\n\t          }\r\n\t        },\r\n\t        err => {\r\n\t            loading.dismissAll();\r\n\t            this.showTechnicalError('1');\r\n\t        });\r\n\t\t}\r\n\t\telse{\r\n\t\t\tlet toast = this.toastCtrl.create({\r\n\t            message: 'Please select atleast one company to add.',\r\n\t            duration: 3000,\r\n\t            position: 'top',\r\n\t            cssClass: 'danger'\r\n            });\r\n            toast.present(); \r\n\t\t}\r\n\t}\r\n\r\n\t  showTechnicalError(type = null){\r\n\t    var msg = (type == '1') ? 'try later.' : 'reload the page.'\r\n\t    let toast = this.toastCtrl.create({\r\n\t        message: 'Technical error, Please '+msg,\r\n\t        duration: 3000,\r\n\t        position: 'top',\r\n\t        cssClass: 'info'\r\n\t      });\r\n\t      toast.present();\r\n\t  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/assign-company/assign-company.ts","import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { AssignCompanyPage } from './assign-company';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AssignCompanyPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(AssignCompanyPage),\r\n  ],\r\n})\r\nexport class AssignCompanyPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/assign-company/assign-company.module.ts"],"sourceRoot":""}