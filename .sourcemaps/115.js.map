{"version":3,"sources":["../../src/pages/add-coworkers/add-coworkers.ts","../../src/pages/add-coworkers/add-coworkers.module.ts"],"names":[],"mappings":"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","file":"115.js","sourcesContent":["import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ToastController, LoadingController, ViewController } from 'ionic-angular';\r\nimport { CompanyProvider } from '../../providers/company/company';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-add-coworkers',\r\n  templateUrl: 'add-coworkers.html',\r\n  providers: [CompanyProvider]\r\n})\r\nexport class AddCoworkersPage {\r\nall_employees:any;\r\ncompanyId: any = localStorage.getItem('switched_comp');\r\nuserId: any = localStorage.getItem('userinfo');\r\nselected_contacts:any = [];\r\njobId:any;\r\nalready:any;\r\nalltrades:any;\r\n  constructor(public navCtrl: NavController, public navParams: NavParams, public toastCtrl: ToastController,public loadingCtrl: LoadingController, public companyProvider: CompanyProvider, public viewCtrl: ViewController) {\r\n  \tthis.jobId = navParams.get('jobId');\r\n  \tthis.already = navParams.get('already');\r\n  \tconsole.log(this.already)\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n   \tthis.getExistingEmployees();\r\n   \tthis.getAllTrades();\r\n  }\r\n\r\n  getAllTrades(){\r\n\tthis.companyProvider.allTrades(this.jobId).subscribe((alltrades)=>{\r\n\t    this.alltrades = alltrades;\r\n\t},\r\n\terr => {\r\n\t\tthis.alltrades = [];\r\n\t    this.showTechnicalError();\r\n\t});\r\n  }\r\n\r\n  getExistingEmployees(){\r\n  \tvar self = this;\r\n    const loading = this.loadingCtrl.create({}); \r\n    loading.present();\r\n    var all_employees = [];\r\n    var loginId = this.userId;\r\n    this.companyProvider.getAllEmployees(this.companyId,this.userId).subscribe((employees)=>{\r\n      this.all_employees=employees;\r\n      \r\n      if(this.all_employees != ''){\r\n        this.all_employees.forEach(function(emp){\r\n          if(emp.status == 1 && emp.fromId != emp.toId){\r\n          \tvar userId = (loginId == emp.fromId) ? emp.toId : emp.fromId;\r\n\t          \tif(self.already.indexOf(userId) == -1){\r\n\t          \t\tvar obj = {\r\n\t\t              name : emp.employee_name,\r\n\t\t              userId : userId,\r\n\t\t              email : emp.employee_email,\r\n\t\t              privilege : 0\r\n\t\t            }\r\n\t\t            all_employees.push(obj);\r\n\t          \t}\r\n          \t}\r\n        });\r\n      }\r\n      this.all_employees = all_employees;\r\n      console.log(this.all_employees)\r\n      loading.dismissAll();\r\n    },\r\n    err => {\r\n        loading.dismissAll();\r\n        this.showTechnicalError();\r\n    });\r\n  }\r\n\r\n    addCoworkers(tradeId){\r\n    \t// if(tradeId == '' || tradeId == undefined || tradeId == null){\r\n    \t// \tlet toast = this.toastCtrl.create({\r\n     //            message: 'Please select trade',\r\n     //            duration: 3000,\r\n     //            position: 'top',\r\n     //            cssClass: 'danger'\r\n     //        });\r\n     //        toast.present();\r\n    \t// }\r\n    \t// else{\r\n\t\t    const loading = this.loadingCtrl.create({});\r\n\t\t    loading.present();\r\n\t\t    var coArr=[];\r\n\t\t    this.selected_contacts.forEach(function(contact){\r\n\t\t    \t// tradeId.forEach(function(trade_id){\r\n\t\t    \t\tcoArr.push({\r\n\t\t\t\t        userId : contact.userId,\r\n\t\t\t\t        privilege : contact.privilege,\r\n\t\t\t\t        tradeId : (tradeId == '' || tradeId == undefined || tradeId == null) ? 0 : tradeId,\r\n\t\t\t\t        unique_id : Math.floor(Math.random() * 100000)\r\n\t\t\t\t    }); \r\n\t\t    \t// });\r\n\t\t    });\r\n\t\t    console.log(coArr);\r\n\r\n\t\t    this.companyProvider.addCoworkers({coworkers : coArr, jobId : this.jobId}).subscribe((employee)=>{\r\n\t\t        if(employee.status == '1'){\r\n\t\t          loading.dismissAll()\r\n\t\t          let toast = this.toastCtrl.create({\r\n\t\t              message: 'Co-workers added successfully.',\r\n\t\t              duration: 3000,\r\n\t\t              position: 'top',\r\n\t\t              cssClass: 'success'\r\n\t\t           });\r\n\t\t           toast.present(); \r\n\t\t           this.dismiss('1');\r\n\t\t        }\r\n\t\t        else{\r\n\t\t          loading.dismissAll()\r\n\t\t          let toast = this.toastCtrl.create({\r\n\t\t                    message: 'Error, plz try later.',\r\n\t\t                    duration: 3000,\r\n\t\t                    position: 'top',\r\n\t\t                    cssClass: 'danger'\r\n\t\t                 });\r\n\t\t                 toast.present(); \r\n\t\t        }\r\n\t\t    },\r\n\t\t    err => {\r\n\t\t        loading.dismissAll();\r\n\t\t        this.showTechnicalError('1');\r\n\t\t    }); \r\n\t\t// }\r\n  \t}\r\n\r\n    insertContactToArray(event,contact){\r\n  \t\tif(event.checked == true){\r\n  \t\t\tthis.selected_contacts.push(contact);\r\n  \t\t}\r\n  \t\telse{\r\n  \t\t\tthis.removeArray(this.selected_contacts, contact);\r\n  \t\t}\r\n\t}\r\n\r\n\tremoveArray(arr,what) {\r\n\t   var a = arguments, L = a.length, ax;\r\n\t    while (L > 1 && arr.length) {\r\n\t        what = a[--L];\r\n\t        while ((ax= arr.indexOf(what)) !== -1) {\r\n\t            arr.splice(ax, 1);\r\n\t        }\r\n\t    }\r\n\t    return arr;\r\n\t}\r\n\r\n    showTechnicalError(type = null){\r\n\t    var msg = (type == '1') ? 'try later.' : 'reload the page.'\r\n\t    let toast = this.toastCtrl.create({\r\n\t        message: 'Technical error, Please '+msg,\r\n\t        duration: 3000,\r\n\t        position: 'top',\r\n\t        cssClass: 'info'\r\n\t      });\r\n\t    toast.present();\r\n\t}\r\n\r\n\tdismiss(data = null){\r\n\t\tthis.viewCtrl.dismiss(data);\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-coworkers/add-coworkers.ts","import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { AddCoworkersPage } from './add-coworkers';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AddCoworkersPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(AddCoworkersPage),\r\n  ],\r\n})\r\nexport class AddCoworkersPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/add-coworkers/add-coworkers.module.ts"],"sourceRoot":""}