{"version":3,"sources":["../../src/pages/trade/trade.ts","../../src/pages/trade/trade.module.ts"],"names":[],"mappings":"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","file":"56.js","sourcesContent":["import { Component} from '@angular/core';\r\nimport { IonicPage, NavController, NavParams  , ModalController, AlertController,ToastController,LoadingController, ViewController } from 'ionic-angular';\r\nimport { CompanyProvider } from '../../providers/company/company';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-trade',\r\n  templateUrl: 'trade.html',\r\n  providers: [CompanyProvider] \r\n})\r\nexport class TradePage {\r\nalltrades:any;\r\nall_trades:any;\r\ntimestamp:any;\r\njob_id:string;\r\njobstree:any;\r\nfile_path:any;\r\nonly_view:any;\r\nselected_trades:any = [];\r\nisBrowser = localStorage.getItem('isBrowser');\r\nactive_job_breadcrumb = localStorage.getItem('active_job_breadcrumb');\r\n  constructor(public modalCtrl: ModalController ,  public navCtrl: NavController, public navParams: NavParams, public companyProvider: CompanyProvider, public alertCtrl: AlertController, public toastCtrl: ToastController,public loadingCtrl: LoadingController,public viewCtrl: ViewController) {\r\n    var current_date = new Date();\r\n    this.timestamp = current_date.getTime();\r\n    this.job_id = navParams.get('job_id'); \r\n    this.only_view = navParams.get('only_view'); \r\n    if(this.job_id == undefined)\r\n    {\r\n      var localJobId = localStorage.getItem('currentJobId');\r\n      if(localJobId != '' && localJobId != undefined && localJobId != null){\r\n        this.job_id = localJobId;\r\n      }\r\n      else{\r\n        this.navCtrl.push('ManagejobPage',{\r\n          is_direct : '0'\r\n        });\r\n      }\r\n    } \r\n  }\r\n\r\n  ionViewDidEnter(){\r\n    this.getTrades();\r\n  }\r\n\r\n  ionViewDidLoad(){\r\n    this.caclHeight();\r\n  }\r\n\r\n  caclHeight(){\r\n    var fixed_div = document.getElementById(\"calc_height_trades\"+this.timestamp);\r\n      if(fixed_div != null){\r\n        var fixed_div_height = fixed_div.offsetHeight;\r\n        document.getElementById('fixed_height_trades'+this.timestamp).style.marginTop = fixed_div_height+'px';\r\n      }\r\n  }\r\n\r\n  getTrades()\r\n  {\r\n    const loading = this.loadingCtrl.create({});\r\n      loading.present();\r\n      this.companyProvider.allTrades(this.job_id).subscribe((alltrades)=>{\r\n        this.alltrades = alltrades;\r\n        this.all_trades = alltrades;\r\n        loading.dismissAll();\r\n      },\r\n      err => {\r\n          loading.dismissAll();\r\n          this.showTechnicalError();\r\n      });\r\n  }\r\n   editJobPage(myEvent11,job_id) \r\n   {\r\n    let modal = this.modalCtrl.create('EditjobPage', { job_id: this.job_id });\r\n    modal.onDidDismiss(data => { \r\n      this.getTrades();\r\n    });\r\n    modal.present({\r\n      ev: myEvent11\r\n    });\r\n  }\r\n\r\n  showTechnicalError(type = null){\r\n    var msg = (type == '1') ? 'try later.' : 'reload the page.'\r\n    let toast = this.toastCtrl.create({\r\n        message: 'Technical error, Please '+msg,\r\n        duration: 3000,\r\n        position: 'top',\r\n        cssClass: 'info'\r\n      });\r\n      toast.present();\r\n  }\r\n\r\naddTradePage(job_id) {\r\n    this.navCtrl.push('AddtradePage', {\r\n    job_id: job_id\r\n  });\r\n  }\r\ndeleteTrade(tradeId) {\r\n    let confirm = this.alertCtrl.create({\r\n      title: 'Are you sure?',\r\n      message: 'It will delete all data related to this trade.',\r\n      buttons: [\r\n        {\r\n          text: 'No',\r\n          handler: () => {\r\n            //console.log('Disagree clicked');\r\n          }\r\n        },\r\n        {\r\n          text: 'Yes',\r\n          handler: () => {\r\n            const loading = this.loadingCtrl.create({});\r\n            loading.present(); \r\n            this.companyProvider.deleteTrades({tradeId : tradeId}).subscribe((deleted)=>{\r\n              if(deleted.status == 1)\r\n              {\r\n                loading.dismissAll()\r\n                let toast = this.toastCtrl.create({\r\n                    message: 'Trades deleted.',\r\n                    duration: 3000,\r\n                    position: 'top',\r\n                    cssClass: 'success'\r\n                   });\r\n                   toast.present();\r\n                   this.getTrades();\r\n              }\r\n              else\r\n              {\r\n                loading.dismissAll()\r\n                let toast = this.toastCtrl.create({\r\n                    message: 'Error, plz try later.',\r\n                    duration: 3000,\r\n                    position: 'top',\r\n                    cssClass: 'danger'\r\n                   });\r\n                   toast.present(); \r\n              }\r\n            },\r\n            err => {\r\n                loading.dismissAll();\r\n                this.showTechnicalError('1');\r\n            });\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    confirm.present();\r\n  } \r\n  getItems(ev: any) {\r\n      this.alltrades = this.all_trades;\r\n      let val = ev.target.value;\r\n\r\n      if (val && val.trim() != '') {\r\n        this.alltrades = this.alltrades.filter((item) => {\r\n          return (item.trade_name.toLowerCase().indexOf(val.toLowerCase()) > -1);\r\n        })\r\n      }\r\n  }\r\n  tradeCalendar(tradeId) {\r\n    this.navCtrl.push('TradecalendarPage', {\r\n    job_id: this.job_id,\r\n    trade_id: tradeId\r\n  });\r\n  }\r\n  jobCalendar(jobId) {\r\n    this.navCtrl.push('JobcalendarPage', {\r\n    job_id: jobId,\r\n    from: 'trade'\r\n  });\r\n  }\r\n\r\n  insertToArray(event,jobId){\r\n    if(event.target.checked == true)\r\n    {\r\n      this.selected_trades.push(jobId);\r\n    }\r\n    else\r\n    {\r\n      this.removeArray(this.selected_trades, jobId);\r\n    }\r\n  }\r\n\r\n  removeArray(arr,what) {\r\n     var a = arguments, L = a.length, ax;\r\n      while (L > 1 && arr.length) {\r\n          what = a[--L];\r\n          while ((ax= arr.indexOf(what)) !== -1) {\r\n              arr.splice(ax, 1);\r\n          }\r\n      }\r\n      return arr;\r\n  }\r\n\r\n  deleteMultipleTrades()\r\n  {\r\n    if(this.selected_trades.length > 0)\r\n    {\r\n       this.deleteTrade(this.selected_trades);\r\n    }\r\n    else\r\n    {\r\n      let toast = this.toastCtrl.create({\r\n        message: 'Please Select Atleast One Trade.',\r\n        duration: 3000,\r\n        position: 'top',\r\n        cssClass: 'danger'\r\n       });\r\n       toast.present(); \r\n    }\r\n  }\r\n\r\n  EditTrade(tradeId)\r\n  {\r\n    this.navCtrl.push('EdittradePage', {tradeId : tradeId, job_id : this.job_id, isEdit : '1'})\r\n  }\r\n\r\n  root(){\r\n    this.navCtrl.setRoot('DashboardPage');\r\n  };\r\n  \r\n  goToJobs(){\r\n    this.navCtrl.push('ManagejobPage',{\r\n    is_direct : '0'\r\n    });\r\n  };\r\n\r\n  backToPage()\r\n  {\r\n    this.navCtrl.push('TradeDashboardPage',{\r\n      jobId : this.job_id\r\n    })\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/trade/trade.ts","import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { TradePage } from './trade';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    TradePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(TradePage),\r\n  ],\r\n})\r\nexport class TradePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/trade/trade.module.ts"],"sourceRoot":""}