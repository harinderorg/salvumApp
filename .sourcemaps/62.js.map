{"version":3,"sources":["../../src/pages/smailfiles/smailfiles.ts","../../src/pages/smailfiles/smailfiles.module.ts"],"names":[],"mappings":"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","file":"62.js","sourcesContent":["import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, ViewController, LoadingController, ToastController } from 'ionic-angular';\r\nimport { CompanyProvider } from '../../providers/company/company';\r\nimport * as CryptoJS from 'crypto-js';\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-smailfiles',\r\n  templateUrl: 'smailfiles.html',\r\n  providers: [CompanyProvider] \r\n})\r\nexport class SmailfilesPage {\r\nselected_files : any;\r\nsmail_files : any;\r\nfileType : any;\r\nmodal_title : any;\r\nfile_path : any;\r\nisShared : any;\r\nfile_types : any;\r\nonLevel : any;\r\nenable_level1 : any;\r\nenable_level2 : any;\r\nenable_level3 : any;\r\nenable_level4 : any;\r\nopened_levels : any;\r\nuserId : any = localStorage.getItem('userinfo');\r\n  constructor(public navCtrl: NavController, public toastCtrl : ToastController, public navParams: NavParams, public viewCtrl: ViewController, public companyProvider: CompanyProvider, public loadingCtrl: LoadingController) {\r\n  \tthis.fileType = navParams.get('file_type');\r\n    this.isShared = navParams.get('isShared');\r\n    this.file_path = localStorage.getItem('current_file_path');\r\n  \tif(this.fileType == '0')\r\n  \t{\r\n  \t\tthis.modal_title = 'Select Photos';\r\n  \t}\r\n  \telse\r\n  \t{\r\n  \t\tthis.modal_title = 'Select Docs';\r\n  \t}\r\n    if(this.fileType == '4'){\r\n      this.modal_title = 'Select Smail Files';\r\n    }\r\n    this.file_types = ['txt','docx','mp3','mp4','php','ppt','psd','xls','xlsx','zip','doc','odt','png','jpg','jpeg','gif','pdf','csv']; \r\n  \tthis.selected_files = [];\r\n  \tvar file_path = \"directory/smail_data\";\r\n  \tconst loading = this.loadingCtrl.create({});\r\n    loading.present(); \r\n  \tthis.companyProvider.getDirectoryFiles(file_path).subscribe((smail_files)=>{\r\n  \t\tif(smail_files.data != null)\r\n  \t\t{\r\n  \t\t\tvar image_types = ['png','jpg','jpeg','gif','bmp']; \r\n  \t\t\tif(this.fileType == '0')\r\n  \t\t\t{\r\n  \t\t\t\tvar smail_images = [];\r\n  \t\t\t\tsmail_files.data.children.forEach(function(smail_data){\r\n  \t\t\t\t\tif(image_types.indexOf(smail_data.name.split('.').pop()) >= 0)\r\n  \t\t\t\t\t{\r\n  \t\t\t\t\t\tsmail_images.push(smail_data);\r\n  \t\t\t\t\t}\r\n  \t\t\t\t});\r\n  \t\t\t\tthis.smail_files = smail_images;\r\n  \t\t\t}\r\n  \t\t\telse\r\n  \t\t\t{\r\n  \t\t\t\tvar smail_docs = [];\r\n  \t\t\t\tsmail_files.data.children.forEach(function(smail_data){\r\n  \t\t\t\t\tif(image_types.indexOf(smail_data.name.split('.').pop()) == -1)\r\n  \t\t\t\t\t{\r\n  \t\t\t\t\t\tsmail_docs.push(smail_data);\r\n  \t\t\t\t\t}\r\n  \t\t\t\t});\r\n  \t\t\t\tthis.smail_files = smail_docs;\r\n  \t\t\t}\r\n  \t\t}\r\n  \t\telse\r\n  \t\t{\r\n  \t\t\tthis.smail_files = []; \r\n  \t\t}\r\n  \t\tloading.dismissAll();\r\n\r\n      // get open levels\r\n      this.opened_levels = [];\r\n\r\n      var levels_array = JSON.parse(localStorage.getItem('alllevel'));\r\n      if(levels_array){\r\n        levels_array.forEach((value) => {\r\n          var decrypted = CryptoJS.AES.decrypt(value, this.userId);\r\n          if(decrypted.toString(CryptoJS.enc.Utf8).split('#')[0] == 'level1'){\r\n            this.enable_level1  = 'false';\r\n          }else if(decrypted.toString(CryptoJS.enc.Utf8).split('#')[0] == 'level2'){\r\n            this.enable_level2  = 'false';\r\n          }else if(decrypted.toString(CryptoJS.enc.Utf8).split('#')[0] == 'level3'){\r\n            this.enable_level3  = 'false';\r\n          }else if(decrypted.toString(CryptoJS.enc.Utf8).split('#')[0] == 'level4'){\r\n            this.enable_level4  = 'false';\r\n          }else if(decrypted.toString(CryptoJS.enc.Utf8).split('#')[0] == 'level0'){\r\n            this.enable_level1 = 'true';\r\n            this.enable_level2 = 'true';\r\n            this.enable_level3 = 'true';\r\n            this.enable_level4 = 'true';\r\n          }\r\n        });\r\n      }\r\n\r\n      if(this.enable_level1 == 'false') \r\n      {\r\n        this.opened_levels.push('1');\r\n      }\r\n      if(this.enable_level2 == 'false')\r\n      {\r\n        this.opened_levels.push('2');\r\n      }\r\n      if(this.enable_level3 == 'false')\r\n      {\r\n        this.opened_levels.push('3');\r\n      }\r\n      if(this.enable_level4 == 'false')\r\n      {\r\n        this.opened_levels.push('4');\r\n      }\r\n  \t},\r\n    err => {\r\n        loading.dismissAll();\r\n        this.showTechnicalError();\r\n    });\r\n  }\r\n\r\n dismiss()\r\n  {\r\n  \tthis.viewCtrl.dismiss();\r\n  }\r\n\r\n  showTechnicalError(type = null){\r\n    var msg = (type == '1') ? 'try later.' : 'reload the page.'\r\n    let toast = this.toastCtrl.create({\r\n        message: 'Technical error, Please '+msg,\r\n        duration: 3000,\r\n        position: 'top',\r\n        cssClass: 'info'\r\n      });\r\n      toast.present();\r\n  }\r\n  \r\n  addFiles()\r\n  {\r\n    if(this.selected_files.length == 0)\r\n    {\r\n      this.dismiss();\r\n    }\r\n  \telse\r\n \t  {\r\n      if(this.isShared == '1' && this.file_path == 'nopath'){\r\n        if(this.onLevel == undefined || this.onLevel == '' || this.onLevel == null){\r\n          let toast = this.toastCtrl.create({\r\n            message: 'Please select level.',\r\n            duration: 3000,\r\n            cssClass: 'danger',\r\n            position: 'top'\r\n           });\r\n           toast.present(); \r\n           return false;\r\n        }\r\n        localStorage.setItem('file_upload_level',this.onLevel);\r\n        this.viewCtrl.dismiss(this.selected_files);\r\n      }\r\n      else{\r\n        this.viewCtrl.dismiss(this.selected_files);\r\n      }\r\n  \t}\r\n  }\r\n\r\n insertFilesToArray(event,file){\r\n\tif(event.checked == true)\r\n\t{\r\n\t\tthis.selected_files.push(file);\r\n\t}\r\n\telse\r\n\t{\r\n\t\tthis.removeArray(this.selected_files, file);\r\n\t}\r\n }\r\n  removeArray(arr,what) {\r\n\t   var a = arguments, L = a.length, ax;\r\n\t    while (L > 1 && arr.length) {\r\n\t        what = a[--L];\r\n\t        while ((ax= arr.indexOf(what)) !== -1) {\r\n\t            arr.splice(ax, 1);\r\n\t        }\r\n\t    }\r\n\t    return arr;\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/smailfiles/smailfiles.ts","import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { SmailfilesPage } from './smailfiles';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SmailfilesPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(SmailfilesPage),\r\n  ],\r\n})\r\nexport class SmailfilesPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/smailfiles/smailfiles.module.ts"],"sourceRoot":""}