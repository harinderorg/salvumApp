{"version":3,"sources":["../../src/pages/editjob/editjob.ts","../../src/pages/editjob/editjob.module.ts"],"names":[],"mappings":"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","file":"90.js","sourcesContent":["import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams ,ViewController, AlertController,ToastController,LoadingController } from 'ionic-angular';\r\nimport { CompanyProvider } from '../../providers/company/company';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-editjob',\r\n  templateUrl: 'editjob.html',\r\n  providers: [CompanyProvider, FormBuilder]\r\n})\r\nexport class EditjobPage {\r\njob_id : string;\r\njob_number : string;\r\njob_title : string;\r\ncompanyId : string;\r\nstatus : string;\r\ncompanies : any;\r\nprivileges : any;\r\nsharedUsers : any;\r\nform: FormGroup;\r\nses_companyId: any = localStorage.getItem('switched_comp');\r\n  constructor(public navCtrl: NavController, public navParams: NavParams , public viewCtrl: ViewController, public companyProvider: CompanyProvider, public alertCtrl: AlertController, public toastCtrl: ToastController,public loadingCtrl: LoadingController, private formBuilder:FormBuilder) {\r\n\r\n  \tvar userId = localStorage.getItem('userinfo');\r\n    const loading = this.loadingCtrl.create({});\r\n    loading.present();\r\n    this.companyProvider.userCompanyDetails(userId,this.ses_companyId).subscribe((companies)=>{\r\n      this.companies=companies;\r\n    },\r\n    err => {\r\n        loading.dismissAll();\r\n        this.showTechnicalError();\r\n    });\r\n\r\n  \tvar job_id = navParams.get('job_id'); \r\n  \tthis.job_id = job_id;\r\n\r\n    this.companyProvider.jobDetails(this.job_id).subscribe((jobdetails)=>{\r\n      jobdetails = jobdetails[0];\r\n      this.job_number = jobdetails.job_number;\r\n      this.job_title = jobdetails.job_title;\r\n      this.companyId = jobdetails.companyId;\r\n      this.status = jobdetails.status;\r\n      this.privileges = jobdetails.privileges;\r\n      this.sharedUsers = jobdetails.sharedArr;\r\n      loading.dismissAll();\r\n    },\r\n    err => {\r\n        loading.dismissAll();\r\n        this.showTechnicalError();\r\n    });\r\n\r\n    this.form = this.formBuilder.group({\r\n      job_number: ['', [Validators.required]],\r\n      job_title: ['', [Validators.required]],\r\n      companyId: ['', [Validators.required]],\r\n      status: ['', [Validators.required]]\r\n    });\r\n\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n    // console.log('ionViewDidLoad EditjobPage');\r\n  }\r\n dismiss() {\r\n    this.viewCtrl.dismiss();\r\n  }\r\n  editJob(){\r\n    for (let i in this.form.controls) {\r\n      this.form.controls[i].markAsTouched();\r\n    }\r\n    if(this.form.valid){\r\n      const loading = this.loadingCtrl.create({});\r\n      loading.present();\r\n        this.companyProvider.editJob(this.job_id,this.form.value).subscribe((formdata)=>{\r\n        if(formdata.status == '1')\r\n        {\r\n          loading.dismissAll()\r\n          let toast = this.toastCtrl.create({\r\n              message: 'Job updated successfully.',\r\n              duration: 3000,\r\n              cssClass: 'success',\r\n              position: 'top'\r\n             });\r\n             toast.present(); \r\n          this.form.reset();\r\n          this.viewCtrl.dismiss('1');\r\n        }\r\n        else if(formdata.status == '2')\r\n        {\r\n          loading.dismissAll()\r\n          let toast = this.toastCtrl.create({\r\n              message: 'Job/PO number already exists.',\r\n              duration: 3000,\r\n              cssClass: 'danger',\r\n              position: 'top'\r\n             });\r\n             toast.present(); \r\n        }\r\n        else\r\n        {\r\n          loading.dismissAll()\r\n          let toast = this.toastCtrl.create({\r\n              message: 'Error, plz try later.',\r\n              duration: 3000,\r\n              cssClass: 'danger',\r\n              position: 'top'\r\n             });\r\n             toast.present(); \r\n        }\r\n      \r\n      },\r\n      err => {\r\n          loading.dismissAll();\r\n          this.showTechnicalError('1');\r\n      });\r\n    }\r\n  }\r\n\r\n  changeSharedPrivileges(userId,priv)\r\n  {\r\n    const loading = this.loadingCtrl.create({});\r\n      loading.present();\r\n        this.companyProvider.changeSharedPrivileges(this.job_id,userId,priv).subscribe((formdata)=>{\r\n        if(formdata.status == '1')\r\n        {\r\n          loading.dismissAll()\r\n          let toast = this.toastCtrl.create({\r\n              message: 'Information updated successfully.',\r\n              duration: 3000,\r\n              cssClass: 'success',\r\n              position: 'top'\r\n             });\r\n             toast.present(); \r\n        }\r\n        else\r\n        {\r\n          loading.dismissAll()\r\n          let toast = this.toastCtrl.create({\r\n              message: 'Error, plz try later.',\r\n              duration: 3000,\r\n              cssClass: 'danger',\r\n              position: 'top'\r\n             });\r\n             toast.present(); \r\n        }\r\n      \r\n      },\r\n      err => {\r\n          loading.dismissAll();\r\n          this.showTechnicalError('1');\r\n      });\r\n  }\r\n\r\n  showTechnicalError(type = null){\r\n    var msg = (type == '1') ? 'try later.' : 'reload the page.'\r\n    let toast = this.toastCtrl.create({\r\n        message: 'Technical error, Please '+msg,\r\n        duration: 3000,\r\n        position: 'top',\r\n        cssClass: 'info'\r\n      });\r\n      toast.present();\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/editjob/editjob.ts","import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { EditjobPage } from './editjob';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    EditjobPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(EditjobPage),\r\n  ],\r\n})\r\nexport class EditjobPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/editjob/editjob.module.ts"],"sourceRoot":""}