{"version":3,"sources":["../../src/pages/companies/companies.ts","../../src/pages/companies/companies.module.ts"],"names":[],"mappings":"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","file":"95.js","sourcesContent":["import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, ModalController, NavParams, AlertController,ToastController,LoadingController } from 'ionic-angular'\r\nimport { CompanyProvider } from '../../providers/company/company';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-companies',\r\n  templateUrl: 'companies.html',\r\n  providers: [CompanyProvider]\r\n})\r\nexport class CompaniesPage {\r\ncompanies:any;\r\nall_companies:any;\r\nisBrowser:any;\r\nuserId:any;\r\ncompanyId:any;\r\nis_access:any;\r\nconstructor(public navCtrl: NavController, public navParams: NavParams, public modalCtrl: ModalController, public companyProvider: CompanyProvider, public alertCtrl: AlertController, public toastCtrl: ToastController,public loadingCtrl: LoadingController) {\r\n    this.isBrowser = localStorage.getItem('isBrowser');\r\n    this.userId = localStorage.getItem('userinfo');\r\n    this.companyId = localStorage.getItem('switched_comp');\r\n  }\r\n  ionViewDidEnter()\r\n  {\r\n    const loading = this.loadingCtrl.create({}); \r\n    loading.present();\r\n    this.companyProvider.getUserCurrentSubscription(this.userId).subscribe((subscription)=>{  \r\n      if(subscription.amount == '0' && subscription.is_activated_license == '0')\r\n      {\r\n        let toast = this.toastCtrl.create({\r\n            message: 'Access denied, Please upgrade your subscription or add license.',\r\n            duration: 3000,\r\n            position: 'top',\r\n            cssClass: 'info'\r\n           });\r\n           toast.present(); \r\n           loading.dismissAll();\r\n           this.navCtrl.setRoot('DashboardPage');\r\n      }\r\n      else{\r\n        this.getCompanies();\r\n      }\r\n    },\r\n    err => {\r\n        loading.dismissAll();\r\n        this.showTechnicalError();\r\n    });\r\n    \r\n  }\r\n  \r\n  getCompanies() {\r\n    const loading = this.loadingCtrl.create({}); \r\n    loading.present();\r\n    var userId = localStorage.getItem('userinfo');\r\n    this.companyProvider.getActivatedLicenses(userId).subscribe((result)=>{\r\n      if(result.all_license_users.indexOf(userId) >= 0)\r\n      {\r\n        this.is_access = '1';\r\n        // this.companyProvider.userCompaniesList(userId).subscribe((companies)=>{\r\n        //   this.companies=companies;\r\n        //   this.all_companies=companies;\r\n        //   loading.dismissAll()\r\n        // })\r\n\r\n        this.companyProvider.userCompanyDetails(userId,this.companyId).subscribe((companies)=>{\r\n          this.companies=companies;\r\n          this.all_companies=companies;\r\n          loading.dismissAll()\r\n        },\r\n        err => {\r\n            loading.dismissAll();\r\n            this.showTechnicalError();\r\n        });\r\n      }\r\n      else{\r\n        loading.dismissAll()\r\n        this.is_access = '0';\r\n      }\r\n    },\r\n    err => {\r\n        loading.dismissAll();\r\n        this.showTechnicalError();\r\n    });\r\n  }\r\n   presentModal5(myEvent5) {\r\n    localStorage.setItem(\"companyPageType\",\"add\");\r\n    localStorage.removeItem(\"companyId\");\r\n    localStorage.removeItem(\"companyName\");\r\n    localStorage.removeItem(\"companyAddress\");\r\n    let modal = this.modalCtrl.create('AddcompanyPage');\r\n    modal.onDidDismiss(data => { \r\n      if(data == '1'){\r\n        this.getCompanies();\r\n      }\r\n    });\r\n    modal.present({ \r\n      ev: myEvent5\r\n    });\r\n  }\r\n\r\n  editCompanyModal(myEvent5,cid,cname,caddress) {\r\n    localStorage.setItem(\"companyPageType\",\"edit\");\r\n    localStorage.setItem(\"companyId\",cid);\r\n    localStorage.setItem(\"companyName\",cname);\r\n    localStorage.setItem(\"companyAddress\",caddress);\r\n    let modal = this.modalCtrl.create('AddcompanyPage');\r\n    modal.onDidDismiss(data => { \r\n      if(data == '1'){\r\n        this.getCompanies();\r\n      }\r\n    });\r\n    modal.present({ \r\n      ev: myEvent5\r\n    });\r\n  }\r\n  openEmployeePage(companyId)\r\n  {\r\n  \tthis.navCtrl.push('EmployeePage',{\r\n      companyId : companyId\r\n    });\r\n  }\r\n\r\n   deleteCompany(companyId) {\r\n    let confirm = this.alertCtrl.create({\r\n      title: 'Are you sure?',\r\n      message: '',\r\n      buttons: [\r\n        {\r\n          text: 'No',\r\n          handler: () => {\r\n            //console.log('Disagree clicked');\r\n          }\r\n        },\r\n        {\r\n          text: 'Yes',\r\n          handler: () => {\r\n            const loading = this.loadingCtrl.create({});\r\n            loading.present();\r\n            this.companyProvider.deleteCompany(companyId).subscribe((deleted)=>{\r\n              if(deleted.status == '1')\r\n              {\r\n                  loading.dismissAll();\r\n                  this.getCompanies();\r\n                  let toast = this.toastCtrl.create({\r\n                      message: 'Company Deleted.',\r\n                      duration: 3000,\r\n                      position: 'top',\r\n                      cssClass: 'success'\r\n                     });\r\n                     toast.present();\r\n              }\r\n              else if(deleted.status == '3')\r\n              {\r\n                  loading.dismissAll()\r\n                    let toast = this.toastCtrl.create({\r\n                        message: 'Sorry! you cant remove this company before deleting associative employees.',\r\n                        duration: 3000,\r\n                        position: 'top',\r\n                        cssClass: 'danger'\r\n                       });\r\n                       toast.present(); \r\n              }\r\n              else if(deleted.status == '4')\r\n              {\r\n                  loading.dismissAll()\r\n                    let toast = this.toastCtrl.create({\r\n                        message: 'Sorry! you cant remove this company before deleting its jobs.',\r\n                        duration: 3000,\r\n                        position: 'top',\r\n                        cssClass: 'danger'\r\n                       });\r\n                       toast.present(); \r\n              }\r\n              else\r\n              {\r\n                  loading.dismissAll()\r\n                    let toast = this.toastCtrl.create({\r\n                        message: 'Error, plz try later.',\r\n                        duration: 3000,\r\n                        position: 'top',\r\n                        cssClass: 'danger'\r\n                       });\r\n                       toast.present(); \r\n              }\r\n            },\r\n            err => {\r\n                loading.dismissAll();\r\n                this.showTechnicalError('1');\r\n            });\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    confirm.present();\r\n  }\r\n    getItems(ev: any) {\r\n      this.companies=this.all_companies;\r\n      let val = ev.target.value;\r\n\r\n    // if the value is an empty string don't filter the items\r\n    if (val && val.trim() != '') {\r\n      this.companies = this.companies.filter((item) => {\r\n        return (item.company_name.toLowerCase().indexOf(val.toLowerCase()) > -1);\r\n      })\r\n    }\r\n\r\n  }\r\n\r\n  showTechnicalError(type = null){\r\n    var msg = (type == '1') ? 'try later.' : 'reload the page.'\r\n    let toast = this.toastCtrl.create({\r\n        message: 'Technical error, Please '+msg,\r\n        duration: 3000,\r\n        position: 'top',\r\n        cssClass: 'info'\r\n      });\r\n      toast.present();\r\n  }\r\n\r\n  root(){\r\n    this.navCtrl.setRoot('DashboardPage');\r\n  };\r\n  \r\n  goToJobs(){\r\n    this.navCtrl.push('ManagejobPage',{\r\n      is_direct : '0'\r\n    });\r\n  };\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/companies/companies.ts","import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { CompaniesPage } from './companies';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    CompaniesPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(CompaniesPage),\r\n  ],\r\n})\r\nexport class CompaniesPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/companies/companies.module.ts"],"sourceRoot":""}