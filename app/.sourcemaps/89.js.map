{"version":3,"sources":["../../src/pages/employee/employee.ts","../../src/pages/employee/employee.module.ts"],"names":[],"mappings":"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","file":"89.js","sourcesContent":["import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, ModalController, NavParams, AlertController,ToastController,LoadingController } from 'ionic-angular';\r\nimport { CompanyProvider } from '../../providers/company/company';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-employee',\r\n  templateUrl: 'employee.html',\r\n  providers: [CompanyProvider]\r\n})\r\nexport class EmployeePage {\r\nemployees:any;\r\nall_employees:any;\r\nuserId:any;\r\nAPIURL:any;\r\ncompanyId:any;\r\nall_members:any = [];\r\nisBrowser = localStorage.getItem('isBrowser');\r\n constructor(public navCtrl: NavController, public navParams: NavParams, public modalCtrl: ModalController, public companyProvider: CompanyProvider, public alertCtrl: AlertController, public toastCtrl: ToastController,public loadingCtrl: LoadingController) {\r\n   \tthis.userId = localStorage.getItem('userinfo');\r\n   \tthis.APIURL = localStorage.getItem('APIURL');\r\n   \tthis.companyId = navParams.get('companyId');\r\n  }\r\n\r\n  ionViewDidEnter(){\r\n  \tthis.getEmployees();\r\n  }\r\n\r\n  getEmployees(){\r\n  \tconst loading = this.loadingCtrl.create({}); \r\n    loading.present();\r\n    this.companyProvider.getAllEmployees(this.companyId,this.userId).subscribe((employees)=>{\r\n      this.employees=employees;\r\n      this.all_employees=employees;\r\n      loading.dismissAll()\r\n    },\r\n    err => {\r\n        loading.dismissAll();\r\n        this.showTechnicalError();\r\n    });\r\n  }\r\n\r\n  showTechnicalError(type = null){\r\n    var msg = (type == '1') ? 'try later.' : 'reload the page.'\r\n    let toast = this.toastCtrl.create({\r\n        message: 'Technical error, Please '+msg,\r\n        duration: 3000,\r\n        position: 'top',\r\n        cssClass: 'info'\r\n      });\r\n      toast.present();\r\n  }\r\n\r\n  setTiming(employeeId,timing){\r\n    let modal = this.modalCtrl.create('TimingPage',{\r\n      employeeId : employeeId,\r\n      timing : timing\r\n    });\r\n    modal.onDidDismiss(data => { \r\n      if(data == '1'){\r\n        let toast = this.toastCtrl.create({\r\n            message: 'Timing updated successfully.',\r\n            duration: 3000,\r\n            position: 'top',\r\n            cssClass: 'success'\r\n         });\r\n         toast.present(); \r\n         this.getEmployees();\r\n      }\r\n    });\r\n    modal.present();\r\n  }\r\n\r\n  addEmploy(){\r\n  \tvar userId = this.userId;\r\n  \tvar companyId = this.companyId;\r\n  \tvar to_userName = localStorage.getItem('userName');\r\n  \tvar baseUrl = localStorage.getItem('baseUrl');\r\n  \tvar already = [];\r\n  \tthis.all_employees.forEach(function(emp){\r\n  \t\talready.push(emp.employee_email);\r\n  \t})\r\n  \tlet modal = this.modalCtrl.create('PaidContactsPage',{\r\n  \t\talready : already\r\n  \t});\r\n  \tmodal.onDidDismiss(data => { \r\n      if(data != undefined && data != null)\r\n\t    {\r\n\t    \tif(data.length > 0)\r\n\t    \t{\r\n\t    \t\tconst loading = this.loadingCtrl.create({});\r\n      \t\t\tloading.present();\r\n\t    \t\tvar returnedArr = [];\r\n\t\t\t      data.forEach(function(contact){\r\n\t\t\t        var new_obj = {\r\n\t\t\t            fromId : userId,\r\n\t\t\t            toId : contact.userId, \r\n\t\t\t            companyId : companyId,\r\n\t\t\t            email : contact.email,\r\n\t\t\t            to_userName : to_userName,\r\n\t\t\t            from_userName : contact.name,\r\n\t\t\t            baseUrl : baseUrl\r\n\t\t\t          }\r\n\t\t\t        returnedArr.push(new_obj); \r\n\t\t\t      });\r\n\t\t\t      this.companyProvider.addAssociateEmployees(returnedArr).subscribe((employee)=>{\r\n\t\t\t\t      if(employee.status == '1')\r\n\t\t\t\t      {\r\n\t\t\t\t      \tloading.dismissAll()\r\n\t\t\t\t      \tlet toast = this.toastCtrl.create({\r\n                    message: 'Employees added successfully.',\r\n                    duration: 3000,\r\n                    position: 'top',\r\n                    cssClass: 'success'\r\n                 });\r\n                 toast.present(); \r\n                 this.getEmployees();\r\n\t\t\t\t      }\r\n\t\t\t\t      else\r\n\t\t\t\t      {\r\n\t\t\t\t      \tloading.dismissAll()\r\n\t\t\t\t      \tlet toast = this.toastCtrl.create({\r\n\t                        message: 'Error, plz try later.',\r\n\t                        duration: 3000,\r\n\t                        position: 'top',\r\n                          cssClass: 'danger'\r\n\t                     });\r\n\t                     toast.present(); \r\n\t\t\t\t      }\r\n\t\t\t\t  },\r\n          err => {\r\n              loading.dismissAll();\r\n              this.showTechnicalError('1');\r\n          });\r\n\t    \t}\r\n\t    }\r\n    });\r\n  \tmodal.present();\r\n  }\r\n\r\n  viewEmployees(employeeDetail){\r\n  \tthis.navCtrl.push('EmployeedetailPage',{\r\n  \t\temployeeDetail : employeeDetail\r\n  \t});\r\n  }\r\n\r\n  deleteEmployees(employeeId){\r\n  \tlet confirm = this.alertCtrl.create({\r\n      title: 'Are you sure?',\r\n      message: '',\r\n      buttons: [\r\n        {\r\n          text: 'No',\r\n          handler: () => {\r\n            //console.log('Disagree clicked');\r\n          }\r\n        },\r\n        {\r\n          text: 'Yes',\r\n          handler: () => {\r\n            const loading = this.loadingCtrl.create({});\r\n            loading.present();\r\n            this.companyProvider.deleteEmployees(employeeId).subscribe((deleted)=>{\r\n              if(deleted.status == 1)\r\n              {\r\n                  loading.dismissAll();\r\n                  this.getEmployees();\r\n                  let toast = this.toastCtrl.create({\r\n                      message: 'Employee deleted.',\r\n                      duration: 3000,\r\n                      cssClass: 'success'\r\n                     });\r\n                     toast.present();\r\n              }\r\n              else\r\n              {\r\n                  loading.dismissAll()\r\n                    let toast = this.toastCtrl.create({\r\n                        message: 'Error, plz try later.',\r\n                        duration: 3000,\r\n                        cssClass: 'danger'\r\n                       });\r\n                       toast.present(); \r\n              }\r\n            },\r\n            err => {\r\n                loading.dismissAll();\r\n                this.showTechnicalError('1');\r\n            });\r\n          }\r\n        }\r\n      ]\r\n    });\r\n    confirm.present();\r\n  }\r\n\r\n  getItems(ev: any) {\r\n      this.employees=this.all_employees\r\n      let val = ev.target.value;\r\n      if (val && val.trim() != '') {\r\n        this.employees = this.employees.filter((item) => {\r\n          return (item.employee_name.toLowerCase().indexOf(val.toLowerCase()) > -1);\r\n        })\r\n      }\r\n  }\r\n\r\n  root(){\r\n    this.navCtrl.setRoot('DashboardPage');\r\n  };\r\n\r\n  goToJobs(){\r\n    this.navCtrl.push('ManagejobPage',{\r\n    is_direct : '0'\r\n    });\r\n  };\r\n\r\n  goToComps(){\r\n    this.navCtrl.push('CompaniesPage');\r\n  };\r\n  \r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/employee/employee.ts","import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { EmployeePage } from './employee';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    EmployeePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(EmployeePage),\r\n  ],\r\n})\r\nexport class EmployeePageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/employee/employee.module.ts"],"sourceRoot":""}