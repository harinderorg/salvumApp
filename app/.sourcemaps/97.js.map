{"version":3,"sources":["../../src/pages/billinghistory/billinghistory.ts","../../src/pages/billinghistory/billinghistory.module.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAA0C;AAC8D;AAC5C;AAC3C;AAOjB,IAAa,WAAW;IAatB,qBAAmB,SAA0B,EAAS,OAAsB,EAAS,SAAoB,EAAQ,IAAS,EAAQ,WAA8B;QAA7I,cAAS,GAAT,SAAS,CAAiB;QAAS,YAAO,GAAP,OAAO,CAAe;QAAS,cAAS,GAAT,SAAS,CAAW;QAAQ,SAAI,GAAJ,IAAI,CAAK;QAAQ,gBAAW,GAAX,WAAW,CAAmB;QAPhK,cAAS,GAAO,EAAE,CAAC;QAGnB,sBAAiB,GAAC,mBAAmB,CAAC;QACtC,wBAAmB,GAAC,qBAAqB,CAAC;QAC1C,qBAAgB,GAAC,kBAAkB,CAAC;QACpC,qBAAgB,GAAS,YAAY,CAAC,OAAO,CAAC,kBAAkB,CAAC,CAAC;IAElE,CAAC;IAED,oCAAc,GAAd;QAAA,iBAuDK;QAtDJ,IAAI,CAAC,SAAS,GAAG,YAAY,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;QAClD,IAAM,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;QACxC,OAAO,CAAC,OAAO,EAAE,CAAC;QACpB,IAAI,MAAM,GAAG,YAAY,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC;QAChD,IAAI,OAAO,GAAG,IAAI,8DAAO,CAAC,EAAE,cAAc,EAAE,kBAAkB,EAAE,CAAC,CAAC;QAC9D,IAAI,OAAO,GAAG,IAAI,qEAAc,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC;QACvD,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,gBAAgB,GAAC,IAAI,CAAC,iBAAiB,GAAG,GAAG,GAAG,MAAM,EAAE,OAAO,CAAC;aACrF,GAAG,CAAC,aAAG,IAAI,UAAG,CAAC,IAAI,EAAE,EAAV,CAAU,CAAC;aACtB,SAAS,CAAC,cAAI;YACX,KAAI,CAAC,IAAI,GAAG,IAAI,CAAC;YACjB,IAAI,UAAU,GAAG,EAAE,CAAC;YACpB,IAAI,CAAC,OAAO,CAAC,UAAS,SAAS;gBAC7B,EAAE,EAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,CACxB,CAAC;oBACC,UAAU,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;gBAC7B,CAAC;YACH,CAAC,CAAC,CAAC;YACH,KAAI,CAAC,SAAS,GAAG,UAAU,CAAC;YAE5B,MAAM,CAAC,KAAI,CAAC,IAAI,CAAC,GAAG,CAAC,KAAI,CAAC,gBAAgB,GAAC,KAAI,CAAC,mBAAmB,GAAG,GAAG,GAAG,MAAM,EAAE,OAAO,CAAC;iBAC3F,GAAG,CAAC,aAAG,IAAI,UAAG,CAAC,IAAI,EAAE,EAAV,CAAU,CAAC;iBACtB,SAAS,CAAC,cAAI;gBACb,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC;gBACf,IAAI,MAAM,GAAG,EAAE,CAAC;gBAChB,IAAI,CAAC,OAAO,CAAC,UAAS,CAAC;oBAEnB,IAAI,KAAK,GAAG,KAAK,CAAC;oBAClB,MAAM,CAAC,OAAO,CAAC,UAAS,CAAC;wBACrB,EAAE,EAAC,CAAC,CAAC,aAAa,IAAI,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC;4BACpC,KAAK,GAAG,IAAI,CAAC;wBACjB,CAAC;oBACL,CAAC,CAAC,CAAC;oBACH,EAAE,EAAC,CAAC,KAAK,CAAC,CAAC,CAAC;wBACR,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;oBACnB,CAAC;gBACL,CAAC,CAAC,CAAC;gBACH,KAAI,CAAC,OAAO,GAAG,MAAM,CAAC;gBACvB,MAAM,CAAC,KAAI,CAAC,IAAI,CAAC,GAAG,CAAC,KAAI,CAAC,gBAAgB,GAAC,KAAI,CAAC,gBAAgB,GAAG,GAAG,GAAG,MAAM,EAAE,OAAO,CAAC;qBACvF,GAAG,CAAC,aAAG,IAAI,UAAG,CAAC,IAAI,EAAE,EAAV,CAAU,CAAC;qBACtB,SAAS,CAAC,cAAI;oBACd,OAAO,CAAC,UAAU,EAAE,CAAC;oBACrB,KAAI,CAAC,YAAY,GAAG,IAAI,CAAC;oBACxB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE,CAAC;wBACxC,IAAI,SAAS,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,CAAC,WAAW,EAAE,CAAC,KAAK,CAAC,CAAC,EAAC,EAAE,CAAC,CAAC;wBACzE,IAAI,CAAC,CAAC,CAAC,CAAC,YAAY,GAAG,SAAS;wBAChC,KAAI,CAAC,UAAU,GAAG,IAAI,CAAC;oBACzB,CAAC;gBACH,CAAC,CAAC;YACN,CAAC,CAAC;QACN,CAAC,EACD,aAAG;YACC,OAAO,CAAC,UAAU,EAAE,CAAC;YACrB,KAAI,CAAC,kBAAkB,EAAE,CAAC;QAC9B,CAAC,CAAC,CAAC;IACT,CAAC;IAEL,wCAAkB,GAAlB,UAAmB,IAAW;QAAX,kCAAW;QAC5B,IAAI,GAAG,GAAG,CAAC,IAAI,IAAI,GAAG,CAAC,GAAG,YAAY,GAAG,kBAAkB;QAC3D,IAAI,KAAK,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC;YAC9B,OAAO,EAAE,0BAA0B,GAAC,GAAG;YACvC,QAAQ,EAAE,IAAI;YACd,QAAQ,EAAE,KAAK;YACf,QAAQ,EAAE,MAAM;SACjB,CAAC,CAAC;QACH,KAAK,CAAC,OAAO,EAAE,CAAC;IACpB,CAAC;IAED,0BAAI,GAAJ;QACE,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,eAAe,CAAC,CAAC;IACxC,CAAC;IAAA,CAAC;IACJ,kBAAC;AAAD,CAAC;AAvFY,WAAW;IALvB,wEAAS,EAAE;IACX,gEAAS,CAAC;QACT,QAAQ,EAAE,cAAc;OACU;KACnC,CAAC;gBAcgK;AA0EjK;SAvFY,WAAW,sB;;;;;;;;;;;;;;;;;;;ACViB;AACO;AACD;AAU/C,IAAa,iBAAiB;IAA9B;IAAgC,CAAC;IAAD,wBAAC;AAAD,CAAC;AAApB,iBAAiB;IAR7B,+DAAQ,CAAC;QACR,YAAY,EAAE;YACZ,oEAAW;SACZ;QACD,OAAO,EAAE;YACP,sEAAe,CAAC,QAAQ,CAAC,oEAAW,CAAC;SACtC;KACF,CAAC;GACW,iBAAiB,CAAG;AAAH","file":"97.js","sourcesContent":["import { Component } from '@angular/core';\r\nimport { IonicPage, NavController, NavParams, LoadingController, ToastController } from 'ionic-angular';\r\nimport {Http, Headers, RequestOptions} from '@angular/http';\r\nimport 'rxjs/Rx';\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-history',\r\n  templateUrl: 'billinghistory.html',\r\n})\r\nexport class HistoryPage {\r\n\r\n  data: Array<{}>;\r\n  license: Array<{}>;\r\n  extraSpace: Array<{}>;\r\n  dataLength:any;\r\n  pack_data:any = [];\r\n  isExtraspace:any;\r\n  isBrowser:any;\r\n  getUserMembership='getUserMembership';\r\n  getUserLicensesData='getUserLicensesData';\r\n  getSpacePackages='getSpacePackages';\r\n  API_ENDPOINT_URL : any = localStorage.getItem('API_ENDPOINT_URL');\r\n  constructor(public toastCtrl: ToastController, public navCtrl: NavController, public navParams: NavParams,public http:Http,public loadingCtrl: LoadingController) {\r\n  }\r\n\r\n  ionViewDidLoad() {\r\n   this.isBrowser = localStorage.getItem('isBrowser');\r\n    const loading = this.loadingCtrl.create({});\r\n        loading.present();\r\n      var userId = localStorage.getItem('userinfo');\r\n    let headers = new Headers({ 'Content-Type': 'application/json' });\r\n        let options = new RequestOptions({ headers: headers });\r\n        return this.http.get(this.API_ENDPOINT_URL+this.getUserMembership + \"/\" + userId, options)\r\n            .map(res => res.json())\r\n            .subscribe(data => {\r\n                this.data = data;\r\n                var packs_data = [];\r\n                data.forEach(function(pack_data){\r\n                  if(pack_data.amount > 0)\r\n                  {\r\n                    packs_data.push(pack_data);\r\n                  }\r\n                });\r\n                this.pack_data = packs_data;\r\n\r\n                return this.http.get(this.API_ENDPOINT_URL+this.getUserLicensesData + \"/\" + userId, options)\r\n                .map(res => res.json())\r\n                .subscribe(data => {\r\n                  console.log(data)\r\n                    var unique = [];\r\n                    data.forEach(function(d) {\r\n\r\n                        var found = false;\r\n                        unique.forEach(function(u) {\r\n                            if(u.transactionId == d.transactionId) {\r\n                                found = true;\r\n                            }\r\n                        });\r\n                        if(!found) {\r\n                            unique.push(d);\r\n                        }\r\n                    });\r\n                    this.license = unique;\r\n                   return this.http.get(this.API_ENDPOINT_URL+this.getSpacePackages + \"/\" + userId, options)\r\n                    .map(res => res.json())\r\n                    .subscribe(data => {\r\n                     loading.dismissAll();\r\n                     this.isExtraspace = data;\r\n                      for (var i = 0; i < data.length; i += 1) {\r\n                        var todayDate = new Date(data[i].created_date).toISOString().slice(0,10);\r\n                        data[i].created_date = todayDate\r\n                        this.extraSpace = data;\r\n                      }\r\n                    })  \r\n                })\r\n            },\r\n            err => {\r\n                loading.dismissAll();\r\n                this.showTechnicalError();\r\n            });\r\n      }\r\n\r\n  showTechnicalError(type = null){\r\n    var msg = (type == '1') ? 'try later.' : 'reload the page.'\r\n    let toast = this.toastCtrl.create({\r\n        message: 'Technical error, Please '+msg,\r\n        duration: 3000,\r\n        position: 'top',\r\n        cssClass: 'info'\r\n      });\r\n      toast.present();\r\n  }\r\n\r\n  root(){\r\n    this.navCtrl.setRoot('DashboardPage');\r\n  };\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/pages/billinghistory/billinghistory.ts","import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\nimport { HistoryPage } from './billinghistory';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    HistoryPage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(HistoryPage),\r\n  ],\r\n})\r\nexport class HistoryPageModule {}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/billinghistory/billinghistory.module.ts"],"sourceRoot":""}